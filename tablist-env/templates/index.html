<!DOCTYPE html>
<html>
  <head>
    <title>Tablist</title>
    <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='styles/styles.css') }}">
    <link rel="icon" type="image/x-icon" href="{{ url_for('static',filename='favicon.ico') }}">
  </head>
  <body>
    <div class = "container">
      <div class = "left">   
      <h1>{{ message }}</h1>
      <h2>Paste a link to a Spotify playlist below</h2>
      <form id = "pdfForm" action="/generate-tabs" method="POST">
        <input type="text" name="link" placeholder="Link goes here" />
        <button type="submit">Submit</button>
        
      </form>
      </div>
      <div class = "right">
        <iframe id="pdfViewer" style="width:100%; height:600px; border:none;"></iframe>
        <script>
            document.getElementById('pdfForm').addEventListener('submit', function(event) {
                event.preventDefault(); // Prevent the form from submitting the traditional way

                const form = event.target;
                const formData = new FormData(form);

                fetch('/generate-tabs', {
                    method: 'POST',
                    body: formData
                })
                .then(response => response.blob())
                .then(blob => {
                    const url = URL.createObjectURL(blob);
                    document.getElementById('pdfViewer').src = url;
                })
                .catch(error => console.error('Error:', error));
            });   
        </script>
      </div>
    </div>
    
  </body>
</html>